<%- include('../partials/header', { title: 'Programs - Ella Rises', user: typeof user !== 'undefined' ? user : null }) %>

<div class="page-header" style="margin-bottom: 1rem;">
    <h1 style="font-size: 2rem; margin-bottom: 0.25rem;">PROGRAMS</h1>
</div>

<div class="program-carousel-container">
    <% 
    const currentIndex = programIndex || 0;
    const programs = [
            {
                title: 'BALLET FOLKLORICO',
                image: '/images/ballet-folklorico-cropped.jpg',
                fallbackImage: '/images/ballet-folklorico-single.png',
            description: 'Our art program fosters joy, confidence, and creative self-expression rooted in culture through Latin American Folk dance.',
            details: [
                'Girls ages 11-18 years old',
                'Mondays at 7pm',
                'Auditions for 2026 begin in May'
            ],
            hasEnroll: true,
            hasDonate: true
        },
            {
                title: 'MARIACHI',
                image: '/images/mariachi-cropped.jpg',
                fallbackImage: '/images/mariachi-single.png',
            description: 'We love mariachi music so we have created a female mariachi band! Our mariachi program relaunched in spring of 2025. All levels of music proficiency are welcome! Join us!',
            details: [],
            hasEnroll: true,
            hasDonate: true
        },
            {
                title: 'SUMMIT + EDUCATIONAL PATHWAYS',
                image: '/images/summit-2022.jpg',
                fallbackImage: '/images/summit-2022.jpg',
            description: 'The Ella Rises Summit is a day camp packed with activities to give a glimpse of the Ella Rises Experience: art, STEM, and a focus on education! We conclude the day camp with a tour of a local university or technical college!',
            details: [],
            hasEnroll: true,
            hasDonate: true
        },
            {
                title: 'STEAM',
                image: '/images/steam-workshop.jpg',
                fallbackImage: '/images/steam-workshop.jpg',
            description: 'We facilitate virtual and in-person STEAM (science, technology, engineering, art and math) workshops to develop and guide participant inquiry, discussion, and critical thinking of STEM related careers.',
            details: [],
            hasEnroll: true,
            hasDonate: true
        }
    ];
    const currentProgram = programs[currentIndex];
    const prevIndex = currentIndex === 0 ? programs.length - 1 : currentIndex - 1;
    const nextIndex = currentIndex === programs.length - 1 ? 0 : currentIndex + 1;
    %>
    
    <div class="program-carousel-nav program-carousel-nav-left">
        <button class="carousel-arrow carousel-arrow-left" onclick="window.location.href='/programs?program=<%= prevIndex %>'" aria-label="Previous program">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
        </button>
    </div>
    
    <div class="program-carousel">
        <div class="program-featured">
            <div class="program-featured-image">
                <img src="<%= currentProgram.image %>" alt="<%= currentProgram.title %>" onerror="this.onerror=null; this.src='<%= currentProgram.fallbackImage %>';">
            </div>
            <div class="program-featured-content">
                <h2><%= currentProgram.title %></h2>
                <p><%= currentProgram.description %></p>
                <% if (currentProgram.details && currentProgram.details.length > 0) { %>
                    <ul class="program-details-list">
                        <% currentProgram.details.forEach(detail => { %>
                            <li><%= detail %></li>
                        <% }); %>
                    </ul>
                <% } %>
                <div class="program-featured-buttons">
                    <% if (currentProgram.hasEnroll) { %>
                        <a href="/register" class="btn btn-primary">Enroll</a>
                    <% } %>
                    <% if (currentProgram.hasDonate) { %>
                        <a href="https://givebutter.com/EllaRises" target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="<%= currentProgram.hasEnroll ? 'margin-left: 0.5rem;' : '' %>">Donate</a>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
    
    <div class="program-carousel-nav program-carousel-nav-right">
        <button class="carousel-arrow carousel-arrow-right" onclick="window.location.href='/programs?program=<%= nextIndex %>'" aria-label="Next program">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18l6-6-6-6"/>
            </svg>
        </button>
    </div>
    
    <div class="program-carousel-indicators">
        <% programs.forEach((program, index) => { %>
            <button 
                class="carousel-indicator <%= index === currentIndex ? 'active' : '' %>" 
                onclick="window.location.href='/programs?program=<%= index %>'"
                aria-label="Go to <%= program.title %>"
            ></button>
        <% }); %>
    </div>
</div>

<style>
.program-carousel-container {
    max-width: calc(var(--container-max-width) + 10rem);
    margin: 1.5rem auto;
    padding: 0 2rem;
    position: relative;
}

.program-carousel {
    max-width: var(--container-max-width);
    margin: 0 auto;
    position: relative;
}

.program-carousel-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
}

.program-carousel-nav-left {
    left: -3.5rem;
}

.program-carousel-nav-right {
    right: -3.5rem;
}

.carousel-arrow {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background-color: var(--coral);
    color: var(--white);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.carousel-arrow:hover {
    background-color: var(--text-dark);
    transform: scale(1.1);
}

.carousel-arrow:active {
    transform: scale(0.95);
}

.carousel-arrow svg {
    width: 20px;
    height: 20px;
}

.program-featured {
    display: flex;
    gap: 2rem;
    align-items: center;
    margin-bottom: 1.5rem;
}

.program-featured-image {
    flex: 1;
    position: relative;
    overflow: hidden;
    max-height: 500px;
    display: flex;
    align-items: flex-start;
    border-radius: 8px;
}

.program-featured-image img {
    width: 100%;
    height: 100%;
    min-height: 400px;
    object-fit: cover;
    object-position: top center;
    border-radius: 8px;
    display: block;
}

.program-featured-content {
    flex: 1;
    padding: 1.5rem;
    background-color: var(--accent-peach);
    border-radius: 8px;
}

.program-featured-content h2 {
    font-family: var(--font-header), serif;
    font-size: 2rem;
    color: var(--text-dark);
    margin-bottom: 1rem;
    font-weight: 700;
    text-transform: uppercase;
}

.program-featured-content p {
    font-family: var(--font-body), Arial, Helvetica, sans-serif;
    font-size: 0.85rem;
    color: var(--text-dark);
    line-height: 1.5;
    margin-bottom: 1rem;
}

.program-details-list {
    list-style: none;
    padding: 0;
    margin: 1rem 0;
}

.program-details-list li {
    font-family: var(--font-body), Arial, Helvetica, sans-serif;
    font-size: 0.9rem;
    color: var(--text-dark);
    padding: 0.4rem 0;
    padding-left: 1.5rem;
    position: relative;
}

.program-details-list li::before {
    content: 'â€¢';
    position: absolute;
    left: 0;
    color: var(--coral);
    font-size: 1.2rem;
    line-height: 1;
}

.program-featured-buttons {
    margin-top: 1.5rem;
}

.program-carousel-indicators {
    display: flex;
    justify-content: center;
    gap: 0.75rem;
    margin-top: 1rem;
}

.carousel-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid var(--coral);
    background-color: transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
}

.carousel-indicator:hover {
    background-color: var(--coral);
    opacity: 0.7;
}

.carousel-indicator.active {
    background-color: var(--coral);
}

@media (max-width: 768px) {
    .program-carousel-container {
        max-width: 100%;
        padding: 0 1rem;
    }
    
    .program-featured {
        flex-direction: column;
        gap: 2rem;
    }
    
    .program-featured-content {
        padding: 1.5rem;
    }
    
    .program-featured-content h2 {
        font-size: 2rem;
    }
    
    .program-featured-content p {
        font-size: 0.85rem;
    }
    
    .program-carousel-nav-left {
        left: -0.5rem;
    }
    
    .program-carousel-nav-right {
        right: -0.5rem;
    }
    
    .carousel-arrow {
        width: 40px;
        height: 40px;
    }
    
    .carousel-arrow svg {
        width: 20px;
        height: 20px;
    }
}
</style>

<%- include('../partials/footer') %>


<%- include('../partials/header', { title: 'Fill Out Survey - Ella Rises', user: user || null }) %>

<div class="page-header">
    <h1>Event Survey</h1>
    <p>Please provide your feedback for this event</p>
</div>

<div class="form-container" style="max-width: 800px; margin: 2rem auto; padding: 0 2rem;">
    <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
        <h2 style="margin: 0 0 0.5rem 0; color: var(--text-dark); font-size: 1.5rem;">
            <%= event.EventName || 'Event' %>
        </h2>
        <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
            <%= event.EventLocation ? event.EventLocation + ' â€¢ ' : '' %><%= event.EventDateTimeStart ? new Date(event.EventDateTimeStart).toLocaleDateString() : '' %>
        </p>
    </div>
    
    <form action="/surveys/<%= event.EventOccurrenceID %>/submit" method="POST" style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <% if (questions && questions.length > 0) { %>
            <% questions.forEach(function(question, index) { %>
                <div class="form-group" style="margin-bottom: 2rem;">
                    <label for="answer_<%= index %>" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--text-dark); font-size: 1.1rem;">
                        <%= question %> (1-5) *
                    </label>
                    <select id="answer_<%= index %>" name="answers[]" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-light); border-radius: 4px; font-size: 1rem;">
                        <option value="">Select rating</option>
                        <option value="1">1 - Poor / Very Dissatisfied</option>
                        <option value="2">2 - Fair / Dissatisfied</option>
                        <option value="3">3 - Good / Neutral</option>
                        <option value="4">4 - Very Good / Satisfied</option>
                        <option value="5">5 - Excellent / Very Satisfied</option>
                    </select>
                </div>
            <% }); %>
        <% } %>
        
        <div class="form-group" style="margin-bottom: 2rem;">
            <label for="comments" style="display: block; margin-bottom: 0.75rem; font-weight: 600; color: var(--text-dark);">
                Additional Comments (Optional)
            </label>
            <textarea id="comments" name="comments" rows="4" placeholder="Share any additional feedback or comments..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-light); border-radius: 4px; font-size: 1rem; font-family: inherit;"></textarea>
        </div>
        
        <div class="form-actions" style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary" style="flex: 1;">Submit Survey</button>
            <a href="/my-surveys" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<%- include('../partials/footer') %>


